# 部署
apiVersion: apps/v1
kind: Deployment
metadata:
  name: demo # 部署名称
  namespace: demo # 所在命名空间
spec:
  replicas: 3 # 实例个数
  selector:
    matchLabels: # 根据标签选择 Pod
      app: demo
  # Pod 模版
  template:
    metadata: # 以 Deployment template 的形式声明 Pod 不需要指定 name，会根据 Deployment name 随机生成
      labels: # Pod 标签，必须要和 spec.selector.matchLabels 匹配
        app: demo
    spec:
      imagePullSecrets: # 私有镜像密钥（仅可使用同一命名空间下的密钥）
        - name: regcred
      containers: # Pod 下的容器，可以有多个
        - name: demo # 容器名
          image: registry.cn-hangzhou.aliyuncs.com/xvrzhao/demo # 容器镜像地址
          env: # 容器内环境变量
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          ports: # 容器内需要暴露的服务端口
            - containerPort: 8080
